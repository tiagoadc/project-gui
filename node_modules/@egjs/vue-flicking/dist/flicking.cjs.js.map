{"version":3,"file":"flicking.cjs.js","sources":["../src/VueRenderer.ts","../src/VuePanel.ts","../src/VueElementProvider.ts","../src/FlickingProps.ts","../src/utils.ts","../src/Flicking.ts","../src/index.umd.ts"],"sourcesContent":["/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport {\n  ExternalRenderer,\n  getFlickingAttached,\n  PanelOptions,\n  RendererOptions\n} from \"@egjs/flicking\";\n\nimport VueFlicking from \"./Flicking\";\nimport VuePanel from \"./VuePanel\";\n\nexport interface VueRendererOptions extends RendererOptions {\n  vueFlicking: VueFlicking;\n}\n\nclass VueRenderer extends ExternalRenderer {\n  // Internal States\n  private _vueFlicking: VueFlicking;\n\n  public constructor(options: VueRendererOptions) {\n    super(options);\n\n    this._vueFlicking = options.vueFlicking;\n  }\n\n  public async render() {\n    const flicking = getFlickingAttached(this._flicking);\n    const vueFlicking = this._vueFlicking;\n    const strategy = this._strategy;\n\n    strategy.updateRenderingPanels(flicking);\n    strategy.renderPanels(flicking);\n\n    return new Promise<void>((resolve) => {\n      vueFlicking.$once(\"render\", resolve);\n      vueFlicking.$forceUpdate();\n    });\n  }\n\n  public async forceRenderAllPanels() {\n    const vueFlicking = this._vueFlicking;\n\n    await super.forceRenderAllPanels();\n\n    return new Promise<void>((resolve) => {\n      vueFlicking.$once(\"render\", resolve);\n      vueFlicking.$forceUpdate();\n    });\n  }\n\n  protected _collectPanels() {\n    const flicking = getFlickingAttached(this._flicking);\n    const vueFlicking = this._vueFlicking;\n    const vuePanels = vueFlicking.$children;\n\n    this._panels = this._strategy.collectPanels(flicking, vuePanels);\n  }\n\n  protected _createPanel(externalComponent: VuePanel, options: PanelOptions) {\n    return this._strategy.createPanel(externalComponent, options);\n  }\n}\n\nexport default VueRenderer;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Vue from \"vue\";\n\nconst VuePanel = Vue.extend<{ hide: boolean }, { getElement: () => HTMLElement }, {}>({\n  data() {\n    return {\n      hide: false\n    };\n  },\n  render() {\n    const children = this.hide\n      ? undefined\n      : this.$slots.default ?? [];\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    return children as any;\n  },\n  methods: {\n    getElement(): HTMLElement { return this.$el as HTMLElement; }\n  }\n});\n\ntype VuePanelType = InstanceType<typeof VuePanel>;\n\ninterface VuePanel extends VuePanelType {}\nexport default VuePanel;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { ElementProvider } from \"@egjs/flicking\";\n\nimport VuePanel from \"./VuePanel\";\n\nclass VueElementProvider implements ElementProvider {\n  private _el: VuePanel;\n\n  public get element() { return this._el.getElement(); }\n  public get rendered() { return !this._el.hide; }\n\n  public constructor(el: VuePanel) {\n    this._el = el;\n  }\n\n  public show() {\n    this._el.hide = false;\n  }\n\n  public hide() {\n    this._el.hide = true;\n  }\n}\n\nexport default VueElementProvider;\n","import { PropType } from \"vue\";\nimport { RecordPropsDefinition } from \"vue/types/options\";\nimport { FlickingOptions, Plugin, Status } from \"@egjs/flicking\";\n\nexport default {\n  viewportTag: {\n    type: String,\n    default: \"div\",\n    required: false\n  },\n  cameraTag: {\n    type: String,\n    default: \"div\",\n    required: false\n  },\n  hideBeforeInit: {\n    type: Boolean,\n    default: false,\n    required: false\n  },\n  firstPanelSize: {\n    type: String,\n    required: false\n  },\n  options: {\n    type: Object as PropType<Partial<FlickingOptions>>,\n    default: () => ({}),\n    required: false\n  },\n  plugins: {\n    type: Array as PropType<Plugin[]>,\n    default: () => ([]),\n    required: false\n  },\n  status: {\n    type: Object as PropType<Status>,\n    required: false\n  }\n} as RecordPropsDefinition<{\n  readonly viewportTag: string;\n  readonly cameraTag: string;\n  readonly hideBeforeInit: boolean;\n  readonly firstPanelSize: string;\n  readonly options: Partial<FlickingOptions>;\n  readonly plugins: Plugin[];\n  readonly status: Status;\n}>;\n\n","import Vue from \"vue\";\n\nexport const getSlots = (component: Vue) => {\n  return component.$slots.default?.filter(slot => slot.tag) ?? [];\n};\n\nexport const fillKeys = (component: Vue) => {\n  const vnodes = getSlots(component);\n\n  vnodes.forEach((node, idx) => {\n    if (node.key == null) {\n      node.key = `$_${idx}`;\n    }\n  });\n};\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ListDiffer, { DiffResult } from \"@egjs/list-differ\";\nimport Vue, { CreateElement, VNodeData, VNode } from \"vue\";\nimport VanillaFlicking, {\n  EVENTS,\n  withFlickingMethods,\n  sync,\n  Plugin,\n  getRenderingPanels,\n  getDefaultCameraTransform,\n  range,\n  VirtualRenderingStrategy,\n  NormalRenderingStrategy\n} from \"@egjs/flicking\";\n\nimport VueRenderer, { VueRendererOptions } from \"./VueRenderer\";\nimport VuePanel from \"./VuePanel\";\nimport VueElementProvider from \"./VueElementProvider\";\nimport FlickingProps from \"./FlickingProps\";\nimport { fillKeys, getSlots } from \"./utils\";\n\nconst Flicking = Vue.extend({\n  props: FlickingProps,\n  components: {\n    Panel: VuePanel\n  },\n  data() {\n    // Mocking the type, as we don't want them to be reactive\n    return {} as {\n      vanillaFlicking: VanillaFlicking;\n      pluginsDiffer: ListDiffer<Plugin>;\n      slotDiffer: ListDiffer<VNode>;\n      diffResult: DiffResult<VNode> | null;\n    };\n  },\n  created() {\n    this.diffResult = null;\n\n    withFlickingMethods(this, \"vanillaFlicking\");\n  },\n  mounted() {\n    const options = this.options;\n    const viewportEl = this.$el as HTMLElement;\n    const rendererOptions: VueRendererOptions = {\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n      vueFlicking: this as any,\n      align: options.align,\n      strategy: options.virtual && (options.panelsPerView ?? -1) > 0\n        ? new VirtualRenderingStrategy()\n        : new NormalRenderingStrategy({\n          providerCtor: VueElementProvider\n        })\n    };\n\n    const flicking = new VanillaFlicking(viewportEl, {\n      ...options,\n      externalRenderer: new VueRenderer(rendererOptions)\n    });\n    this.vanillaFlicking = flicking;\n\n    flicking.once(EVENTS.READY, () => {\n      this.$forceUpdate();\n    });\n\n    const slots = getSlots(this);\n    this.slotDiffer = new ListDiffer<VNode>(slots, vnode => (vnode.key as string));\n    this.pluginsDiffer = new ListDiffer<Plugin>();\n\n    this._bindEvents();\n    this._checkPlugins();\n\n    if (this.status) {\n      flicking.setStatus(this.status);\n    }\n  },\n  beforeDestroy() {\n    this.vanillaFlicking?.destroy();\n  },\n  beforeMount() {\n    fillKeys(this);\n  },\n  beforeUpdate() {\n    fillKeys(this);\n\n    this.diffResult = this.slotDiffer.update(getSlots(this));\n  },\n  updated() {\n    const flicking = this.vanillaFlicking;\n    const diffResult = this.diffResult;\n\n    this._checkPlugins();\n    this.$emit(\"render\");\n\n    if (!diffResult || !flicking.initialized) return;\n\n    sync(flicking, diffResult, this.$children);\n\n    if (diffResult.added.length > 0 || diffResult.removed.length > 0) {\n      this.$forceUpdate();\n    }\n\n    this.diffResult = null;\n  },\n  render(h: CreateElement): VNode {\n    const flicking = this.vanillaFlicking;\n    const options = this.options;\n    const initialized = !!this.diffResult && flicking && flicking.initialized;\n    const isHorizontal = flicking\n      ? flicking.horizontal\n      : options.horizontal ?? true;\n\n    const viewportData: VNodeData = {\n      class: {\n        \"flicking-viewport\": true,\n        \"vertical\": !isHorizontal,\n        \"flicking-hidden\": this.hideBeforeInit && !initialized\n      }\n    };\n    const cameraData: VNodeData = {\n      class: {\n        \"flicking-camera\": true\n      },\n      style: !initialized && this.firstPanelSize\n        ? { transform: getDefaultCameraTransform(options.align, options.horizontal, this.firstPanelSize) }\n        : {}\n    };\n\n    const panels = options.virtual && (options.panelsPerView ?? -1) > 0\n      ? this._getVirtualPanels(h, initialized)\n      : this._getPanels(h, initialized);\n\n    return h(this.viewportTag, viewportData,\n      [h(this.cameraTag, cameraData,\n        panels,\n      ), this.$slots.viewport],\n    );\n  },\n  methods: {\n    /* eslint-disable @typescript-eslint/naming-convention */\n    _getSlots() {\n      return this.$slots.default?.filter(slot => slot.tag) ?? [];\n    },\n    _fillKeys() {\n      const vnodes = this._getSlots();\n\n      vnodes.forEach((node, idx) => {\n        if (node.key == null) {\n          node.key = `$_${idx}`;\n        }\n      });\n    },\n    _bindEvents() {\n      const flicking = this.vanillaFlicking;\n      const events = Object.keys(EVENTS).map(key => EVENTS[key]);\n\n      events.forEach(eventName => {\n        flicking.on(eventName, (e: any) => {\n          e.currentTarget = this;\n          // Make events from camelCase to kebab-case\n          this.$emit(eventName.replace(/([A-Z])/g, \"-$1\").toLowerCase(), e);\n        });\n      });\n    },\n    _checkPlugins() {\n      const { list, added, removed, prevList } = this.pluginsDiffer.update(this.plugins);\n\n      this.vanillaFlicking.addPlugins(...added.map(index => list[index]));\n      this.vanillaFlicking.removePlugins(...removed.map(index => prevList[index]));\n    },\n    _getPanels(h: CreateElement, initialized: boolean) {\n      const slots = initialized\n        ? getRenderingPanels(this.vanillaFlicking, this.diffResult!)\n        : this._getSlots();\n      return slots.map(slot => h(\"Panel\", { key: slot.key as string }, [slot]));\n    },\n    _getVirtualPanels(h: CreateElement, initialized: boolean) {\n      const options = this.options;\n      const {\n        panelClass = \"flicking-panel\"\n      } = options.virtual!;\n      const panelsPerView = options.panelsPerView as number;\n      const flicking = this.vanillaFlicking;\n\n      const renderingIndexes = initialized\n        ? flicking.renderer.strategy.getRenderingIndexesByOrder(flicking)\n        : range(panelsPerView + 1);\n\n      const firstPanel = flicking && flicking.panels[0];\n      const size = firstPanel\n        ? flicking.horizontal\n          ? { width: firstPanel.size }\n          : { height: firstPanel.size }\n        : {};\n\n      return renderingIndexes.map(idx => h(\"div\", {\n        key: idx,\n        staticClass: panelClass,\n        style: size,\n        domProps: {\n          \"data-element-index\": idx\n        }\n      }));\n    }\n  }\n});\n\ntype VueFlicking = InstanceType<typeof Flicking>;\n\ninterface Flicking extends VueFlicking, VanillaFlicking {}\nexport default Flicking;\n","/**\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { VueConstructor } from \"vue\";\n\nimport Flicking from \"./Flicking\";\n\ndeclare global {\n  interface Window {\n    Vue: VueConstructor;\n  }\n}\n\nconst version = \"#__VERSION__#\";\nconst install = (Vue: VueConstructor): void => {\n  Vue.component(\"Flicking\", Flicking);\n};\n\nconst plugin = {\n  Flicking,\n  install,\n  version\n};\nexport default plugin;\n"],"names":["__extends","options","_super","_this","_vueFlicking","vueFlicking","flicking","getFlickingAttached","_flicking","strategy","_strategy","updateRenderingPanels","renderPanels","Promise","resolve","$once","$forceUpdate","forceRenderAllPanels","_a","vuePanels","$children","_panels","collectPanels","externalComponent","createPanel","ExternalRenderer","VuePanel","Vue","extend","data","hide","render","children","undefined","$slots","default","methods","getElement","$el","el","_el","Object","viewportTag","type","String","required","cameraTag","hideBeforeInit","Boolean","firstPanelSize","plugins","Array","status","getSlots","component","filter","slot","tag","fillKeys","vnodes","forEach","node","idx","key","Flicking","props","FlickingProps","components","Panel","created","diffResult","withFlickingMethods","mounted","viewportEl","rendererOptions","align","virtual","panelsPerView","VirtualRenderingStrategy","NormalRenderingStrategy","providerCtor","VueElementProvider","VanillaFlicking","externalRenderer","VueRenderer","vanillaFlicking","once","EVENTS","READY","slots","slotDiffer","ListDiffer","vnode","pluginsDiffer","_bindEvents","_checkPlugins","setStatus","beforeDestroy","destroy","beforeMount","beforeUpdate","update","updated","$emit","initialized","sync","added","length","removed","h","isHorizontal","horizontal","viewportData","class","cameraData","style","transform","getDefaultCameraTransform","panels","_getVirtualPanels","_getPanels","viewport","_getSlots","_fillKeys","events","keys","map","eventName","on","e","currentTarget","replace","toLowerCase","_c","list","prevList","addPlugins","index","_b","removePlugins","getRenderingPanels","panelClass","renderingIndexes","renderer","getRenderingIndexesByOrder","range","firstPanel","size","width","height","staticClass","domProps","version","install","plugin"],"mappings":"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"}